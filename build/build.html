<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!--
      The Test build script
 parameters will be replaced with the
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Test build script
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">

    <link type="text/css" rel="stylesheet" href="../content/style_light.css" />
    <script src="../content/tips.js" type="text/javascript"></script>

</head>

<body>
    <div class="container">
        <div class="row" style="margin-top:30px">
            <div class="span1"></div>
            <div class="span10" id="main">
                <h1>Test build script</h1>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">dotnet</span> <span class="i">tool</span> <span class="i">install</span> <span class="o">--</span><span class="k">global</span> <span class="i">fake</span><span class="o">-</span><span class="i">cli</span>
<span class="i">fake</span> <span class="i">run</span> <span class="i">build</span><span class="o">.</span><span class="i">fsx</span>
</code></pre></td>
</tr>
</table>
<p>Setting this whole thing up:</p>
<ul>
<li>.NET Core and Fake CLI installed -&gt; FAKE runs on .NET Core</li>
<li>A build task that uses a .NET 4.6 library -&gt; Fsharp.Formating runs on .NET 4.6</li>
<li>Fake runs <code>build.fsx</code> which uses <code>fsi</code> with NetStandard to load and execute <code>build_internal.fsx</code> and uses Fsharp.Formating</li>
</ul>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs14', 40)" onmouseover="showTip(event, 'fs14', 40)" class="t">Target</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 41)" onmouseover="showTip(event, 'fs15', 41)" class="f">create</span> <span class="s">&quot;Literate&quot;</span> (<span class="k">fun</span> _ <span class="k">-&gt;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 42)" onmouseover="showTip(event, 'fs25', 42)" class="i">script</span> <span class="o">=</span> <span class="s">&quot;build_internal.fsx&quot;</span>
    <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">exitcode</span>, <span onmouseout="hideTip(event, 'fs27', 44)" onmouseover="showTip(event, 'fs27', 44)" class="i">msgs</span>) <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs28', 45)" onmouseover="showTip(event, 'fs28', 45)" class="t">Fsi</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 46)" onmouseover="showTip(event, 'fs29', 46)" class="f">exec</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs30', 47)" onmouseover="showTip(event, 'fs30', 47)" class="i">p</span> <span class="k">-&gt;</span>
            { <span onmouseout="hideTip(event, 'fs30', 48)" onmouseover="showTip(event, 'fs30', 48)" class="i">p</span> <span class="k">with</span> <span class="i">TargetProfile</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 49)" onmouseover="showTip(event, 'fs28', 49)" class="t">Fsi</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 50)" onmouseover="showTip(event, 'fs31', 50)" class="t">Profile</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 51)" onmouseover="showTip(event, 'fs32', 51)" class="p">NetStandard</span> }
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 52)" onmouseover="showTip(event, 'fs33', 52)" class="t">Process</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 53)" onmouseover="showTip(event, 'fs34', 53)" class="f">setEnvironmentVariable</span> <span class="s">&quot;__X_TEMP__&quot;</span> <span class="s">&quot;zero&quot;</span>
        ) <span onmouseout="hideTip(event, 'fs25', 54)" onmouseover="showTip(event, 'fs25', 54)" class="i">script</span> [ <span class="s">&quot;_x_arg_&quot;</span> ]

    <span onmouseout="hideTip(event, 'fs35', 55)" onmouseover="showTip(event, 'fs35', 55)" class="t">Trace</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs36', 56)" onmouseover="showTip(event, 'fs36', 56)" class="f">trace</span> (<span onmouseout="hideTip(event, 'fs37', 57)" onmouseover="showTip(event, 'fs37', 57)" class="f">sprintf</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s"> </span><span class="pf">%A</span><span class="s"></span><span class="e">\n</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs26', 58)" onmouseover="showTip(event, 'fs26', 58)" class="i">exitcode</span> <span onmouseout="hideTip(event, 'fs27', 59)" onmouseover="showTip(event, 'fs27', 59)" class="i">msgs</span>)
)
</code></pre></td>
</tr>
</table>
<p>If one of the "other" dependencies does not exist, everything fails...</p>
<p><img src="../adata/build_stuff.png" alt="Build dependencies" title="build_0" /></p>
<p>All done!</p>

                <div class="tip" id="fs1">namespace Fake</div>
<div class="tip" id="fs2">namespace Fake.Core</div>
<div class="tip" id="fs3">namespace Fake.DotNet</div>
<div class="tip" id="fs4">namespace Fake.IO</div>
<div class="tip" id="fs5">namespace Fake.IO.Globbing</div>
<div class="tip" id="fs6">module Operators<br /><br />from Fake.IO.Globbing</div>
<div class="tip" id="fs7">val buildDir : string<br /><br />Full name: Build.buildDir</div>
<div class="tip" id="fs8">val buildDebug : options:DotNet.BuildOptions -&gt; DotNet.BuildOptions<br /><br />Full name: Build.buildDebug</div>
<div class="tip" id="fs9">val options : DotNet.BuildOptions</div>
<div class="tip" id="fs10">module DotNet<br /><br />from Fake.DotNet</div>
<div class="tip" id="fs11">type BuildOptions =<br />&#160;&#160;{Common: Options;<br />&#160;&#160;&#160;Configuration: BuildConfiguration;<br />&#160;&#160;&#160;Framework: string option;<br />&#160;&#160;&#160;Runtime: string option;<br />&#160;&#160;&#160;BuildBasePath: string option;<br />&#160;&#160;&#160;OutputPath: string option;<br />&#160;&#160;&#160;Native: bool;}<br />&#160;&#160;member WithCommon : f:(Options -&gt; Options) -&gt; BuildOptions<br />&#160;&#160;member WithEnvironment : map:Map&lt;string,string&gt; -&gt; BuildOptions<br />&#160;&#160;member WithRedirectOutput : shouldRedirect:bool -&gt; BuildOptions<br />&#160;&#160;member Environment : Map&lt;string,string&gt;<br />&#160;&#160;static member Create : unit -&gt; BuildOptions<br /><br />Full name: Fake.DotNet.DotNet.BuildOptions</div>
<div class="tip" id="fs12">Multiple items<br />module BuildConfiguration<br /><br />from Fake.DotNet.DotNet<br /><br />--------------------<br />type BuildConfiguration =<br />&#160;&#160;| Debug<br />&#160;&#160;| Release<br />&#160;&#160;| Custom of string<br />&#160;&#160;override ToString : unit -&gt; string<br /><br />Full name: Fake.DotNet.DotNet.BuildConfiguration</div>
<div class="tip" id="fs13">union case DotNet.BuildConfiguration.Debug: DotNet.BuildConfiguration</div>
<div class="tip" id="fs14">Multiple items<br />module Target<br /><br />from Fake.Core<br /><br />--------------------<br />type Target =<br />&#160;&#160;{Name: string;<br />&#160;&#160;&#160;Dependencies: string list;<br />&#160;&#160;&#160;SoftDependencies: string list;<br />&#160;&#160;&#160;Description: TargetDescription option;<br />&#160;&#160;&#160;Function: TargetParameter -&gt; unit;}<br />&#160;&#160;member DescriptionAsString : TargetDescription<br /><br />Full name: Fake.Core.Target</div>
<div class="tip" id="fs15">val create : name:string -&gt; body:(TargetParameter -&gt; unit) -&gt; unit<br /><br />Full name: Fake.Core.Target.create</div>
<div class="tip" id="fs16">Multiple items<br />module Shell<br /><br />from Fake.IO<br /><br />--------------------<br />type Shell =<br />&#160;&#160;private new : unit -&gt; Shell<br />&#160;&#160;static member AsyncExec : cmd:string * ?args:string * ?dir:string -&gt; Async&lt;int&gt;<br />&#160;&#160;static member Exec : cmd:string * ?args:string * ?dir:string -&gt; int<br />&#160;&#160;static member private GetParams : cmd:string * ?args:string * ?dir:string -&gt; ExecParams<br /><br />Full name: Fake.Core.Shell</div>
<div class="tip" id="fs17">val cleanDir : path:string -&gt; unit<br /><br />Full name: Fake.IO.Shell.cleanDir</div>
<div class="tip" id="fs18">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs19">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs20">val exec : buildOptions:(DotNet.Options -&gt; DotNet.Options) -&gt; command:string -&gt; args:string -&gt; ProcessResult<br /><br />Full name: Fake.DotNet.DotNet.exec</div>
<div class="tip" id="fs21">val id : x:&#39;T -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.id</div>
<div class="tip" id="fs22">val iter : action:(&#39;T -&gt; unit) -&gt; source:seq&lt;&#39;T&gt; -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Seq.iter</div>
<div class="tip" id="fs23">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs24">val build : setParams:(DotNet.BuildOptions -&gt; DotNet.BuildOptions) -&gt; project:string -&gt; unit<br /><br />Full name: Fake.DotNet.DotNet.build</div>
<div class="tip" id="fs25">val script : string</div>
<div class="tip" id="fs26">val exitcode : int</div>
<div class="tip" id="fs27">val msgs : string list</div>
<div class="tip" id="fs28">module Fsi<br /><br />from Fake.DotNet</div>
<div class="tip" id="fs29">val exec : fsiParams:(Fsi.FsiParams -&gt; Fsi.FsiParams) -&gt; script:string -&gt; scriptArgs:string list -&gt; int * string list<br /><br />Full name: Fake.DotNet.Fsi.exec</div>
<div class="tip" id="fs30">val p : Fsi.FsiParams</div>
<div class="tip" id="fs31">type Profile =<br />&#160;&#160;| MsCorlib<br />&#160;&#160;| Netcore<br />&#160;&#160;| NetStandard<br />&#160;&#160;override ToString : unit -&gt; string<br /><br />Full name: Fake.DotNet.Fsi.Profile</div>
<div class="tip" id="fs32">union case Fsi.Profile.NetStandard: Fsi.Profile</div>
<div class="tip" id="fs33">module Process<br /><br />from Fake.Core</div>
<div class="tip" id="fs34">val setEnvironmentVariable : envKey:string -&gt; envVar:string -&gt; startInfo:&#39;a -&gt; &#39;a (requires member get_Environment and member WithEnvironment)<br /><br />Full name: Fake.Core.Process.setEnvironmentVariable</div>
<div class="tip" id="fs35">module Trace<br /><br />from Fake.Core</div>
<div class="tip" id="fs36">val trace : message:string -&gt; unit<br /><br />Full name: Fake.Core.Trace.trace</div>
<div class="tip" id="fs37">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs38">module TargetOperators<br /><br />from Fake.Core</div>
<div class="tip" id="fs39">val runOrDefault : defaultTarget:string -&gt; unit<br /><br />Full name: Fake.Core.Target.runOrDefault</div>

                <hr>
                <!-- {source} -->
            </div>
            <div class="span1"></div>
        </div>
    </div>
</body>

</html>